<div class="container-fluid" id="Output">
    <div class="row">
        <ol class="breadcrumb path path-lookback">
            <li><a href="#/">Home</a></li>
            <li>Look Back</li>
            <li><a href="#/lookback/init">Initial Input</a></li>
            <li><a href="#/lookback/add">Additional Input</a></li>
            <li>Output</li>
        </ol>
    </div>
    <div class="row" ng-show="getJson" id="info">
        <div class="well well-sm">
            <label>Scenario ID:&nbsp</label>{{scenario.scenarioId}} <br>
            <label>Brand</label>: {{scenario.brand}}
            <label>Attribution</label>: {{scenario.lmTouch}}
            <label>Begin Period</label>: {{scenario.beginDate | date:'MMM-yyyy'}}
            <label>End Period</label>: {{scenario.endDate | date:'MMM-yyyy'}}
            <label>Portfolio Spend </label>: <span ng-show="!slideError">{{scenario.spend | formatCurrency}}</span><span ng-show="slideError" style="color:red;">{{scenario.spend | formatCurrency}}</span>
            <label>Data through</label>: {{scenario.dataThrough | date:'MMM-yyyy'}}
        </div>
    </div>
    <div class="waiting" style="height: 400px;" ng-hide="getJson" id="progress">
        <div class="jumbotron">
            <!--<h2>Tool is calculating the most optimal scenario for you.</h2>-->
            <!--<h2>Result will appear shortly!</h2>-->
            <!--<h3>(Average waiting time is 10min.)</h3>-->
        </div>

    </div>
    <script>
        $('table.thead-fixed-top').on('scroll', function () {
            $('table.thead-fixed-top > *').width($('table.thead-fixed-top').width() + $('table.thead-fixed-top').scrollLeft());
        });
    </script>
    <div class="row" ng-show="getJson" id="data">
        <div class="{{lookbackContentSize}} container-fluid">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-condensed roi-table thead-fixed-top"  align="center" style="width:80%;">
                    <thead>
                    <tr>
                        <th class="col-1" rowspan="2">Portfolio <br/>Channels</th>
                        <th class="col-2 old" colspan="2">Actuals</th>
                        <th class="col-2" colspan="2"> Optimized</th>
                        <th class="col-2" colspan="2">Difference</th>
                    </tr>
                    <tr>
                        <th class="col-1 old">Spend</th>
                        <th class="col-1 old">Revenue</th>
                        <!--<th class="col-1">Lower</th>-->
                        <th class="col-1">Spend</th>
                        <!--<th class="col-1">Upper</th>-->
                        <th class="col-1">Revenue</th>
                        <th class="col-1">Spend</th>
                        <th class="col-1">Revenue</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="col-1 td-title" ng-click="hideSemItems = !hideSemItems">SEM Total<button class="btn btn-xs btn-default"><i ng-hide="hideSemItems" class="fa fa-minus"></i><i ng-show="hideSemItems" class="fa fa-plus"></i></button></td>
                        <td class="col-1 old">{{lookBack.history.semSR | formatCurrency}}</td>
                        <td class="col-1 old">{{lookBack.history.semPR | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.output.semAS | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.output.semAR | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.semSD | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.semRD | formatCurrency}}</td>
                    </tr>
                    <tr ng-hide="hideSemItems">
                        <td class="col-1 td-subtitle">SEM-Brand</td>
                        <td class="col-1 old">{{lookBack.history.semBSR | formatCurrency}}</td>
                        <td class="col-1 disabled old">&nbsp;</td>
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.semBSlide" min="lookBack.output.semBMin" max="lookBack.output.semBMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.semBSR | formatCurrency}}</td>-->
                        <td class="col-1 disabled">&nbsp;</td>
                        <td class="col-1">{{lookBack.difference.semBSD | formatCurrency}}</td>
                        <td class="col-1 disabled">&nbsp;</td>
                    </tr>
                    <tr ng-hide="hideSemItems">
                        <td class="col-1 td-subtitle">SEM-Cards</td>
                        <td class="col-1 old">{{lookBack.history.semCSR | formatCurrency}}</td>
                        <td class="col-1 disabled old">&nbsp;</td>
                        <!--<td>{{lookBack.output.semCLB | formatCurrency}}</td>-->
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.semCSlide" min="lookBack.output.semCMin" max="lookBack.output.semCMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.semCUB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.output.semCSR | formatCurrency}}</td>-->
                        <td class="col-1 disabled">&nbsp;</td>
                        <td class="col-1">{{lookBack.difference.semCSD | formatCurrency}}</td>
                        <td class="col-1 disabled">&nbsp;</td>
                    </tr>
                    <tr ng-hide="hideSemItems">
                        <td class="col-1 td-subtitle">SEM-Photobook</td>
                        <td class="col-1 old">{{lookBack.history.semPSR | formatCurrency}}</td>
                        <td class="col-1 disabled old">&nbsp;</td>
                        <!--<td>{{lookBack.output.semPLB | formatCurrency}}</td>-->
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.semPSlide" min="lookBack.output.semPMin" max="lookBack.output.semPMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.semPUB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.output.semPSR | formatCurrency}}</td>-->
                        <td class="col-1 disabled">&nbsp;</td>
                        <td class="col-1">{{lookBack.difference.semPSD | formatCurrency}}</td>
                        <td class="col-1 disabled">&nbsp;</td>
                    </tr>
                    <tr ng-hide="hideSemItems">
                        <td class="col-1 td-subtitle">SEM-Others</td>
                        <td class="col-1 old">{{lookBack.history.semOSR | formatCurrency}}</td>
                        <td class="col-1 disabled old">&nbsp;</td>
                        <!--<td>{{lookBack.output.semOLB | formatCurrency}}</td>-->
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.semOSlide" min="lookBack.output.semOMin" max="lookBack.output.semOMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.semOUB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.output.semOSR | formatCurrency}}</td>-->
                        <td class="col-1 disabled">&nbsp;</td>
                        <td class="col-1">{{lookBack.difference.semOSD | formatCurrency}}</td>
                        <td class="col-1 disabled">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="col-1 td-title">Display</td>
                        <td class="col-1 old">{{lookBack.history.disSR | formatCurrency}}</td>
                        <td class="col-1 old">{{lookBack.history.disPR | formatCurrency}}</td>
                        <!--<td>{{lookBack.output.disLB | formatCurrency}}</td>-->
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.disSlide" min="lookBack.output.disMin" max="lookBack.output.disMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.disUB | formatCurrency}}</td>-->

                        <!--<td>{{lookBack.output.disSR | formatCurrency}}</td>-->
                        <td class="col-1">{{lookBack.output.disAR | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.disSD | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.disRD | formatCurrency}}</td>
                    </tr>
                    <tr>
                        <td class="col-1 td-title">Social</td>
                        <td class="col-1 old">{{lookBack.history.socSR | formatCurrency}}</td>
                        <td class="col-1 old">{{lookBack.history.socPR | formatCurrency}}</td>
                        <!--<td>{{lookBack.output.socLB | formatCurrency}}</td>-->
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.socSlide" min="lookBack.output.socMin" max="lookBack.output.socMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.socUB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.output.socSR | formatCurrency}}</td>-->
                        <td class="col-1">{{lookBack.output.socAR | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.socSD | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.socRD | formatCurrency}}</td>
                    </tr>
                    <tr>
                        <td class="col-1 td-title">Affiliates</td>
                        <td class="col-1 old">{{lookBack.history.affSR | formatCurrency}}</td>
                        <td class="col-1 old">{{lookBack.history.affPR | formatCurrency}}</td>
                        <!--<td>{{lookBack.output.affLB | formatCurrency}}</td>-->
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.affSlide" min="lookBack.output.affMin" max="lookBack.output.affMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.affUB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.output.affSR | formatCurrency}}</td>-->
                        <td class="col-1">{{lookBack.output.affAR | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.affSD | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.affRD | formatCurrency}}</td>
                    </tr>
                    <tr>
                        <td class="col-1 td-title">Partners</td>
                        <td class="col-1 old">{{lookBack.history.parSR | formatCurrency}}</td>
                        <td class="col-1 old">{{lookBack.history.parPR | formatCurrency}}</td>
                        <!--<td>{{lookBack.output.parLB | formatCurrency}}</td>-->
                        <td class="col-1 range-input">
                            <range-input ng-change="slideValidate()" ng-model="lookBack.output.parSlide" min="lookBack.output.parMin" max="lookBack.output.parMax"></range-input>
                        </td>
                        <!--<td>{{lookBack.output.parUB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.output.parSR | formatCurrency}}</td>-->
                        <td class="col-1">{{lookBack.output.parAR | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.parSD | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.parRD | formatCurrency}}</td>
                    </tr>
                    <tr>
                        <td class="col-1 td-title">Portfolio Total</td>
                        <td class="col-1 old">{{lookBack.history.totSR | formatCurrency}}</td>
                        <td class="col-1 old">{{lookBack.history.totPR | formatCurrency}}</td>
                        <!--<td>{{lookBack.output.totLB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.input.totSB | formatCurrency}}</td>-->
                        <!--<td>{{lookBack.output.totUB | formatCurrency}}</td>-->
                        <td class="col-1">{{lookBack.output.totAS | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.output.totAR | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.totSD | formatCurrency}}</td>
                        <td class="col-1">{{lookBack.difference.totRD | formatCurrency}}</td>
                    </tr>
                    <tr>
                        <td class="col-1 td-title">Portfolio ROI</td>
                        <td colspan="2" class="old col-2">{{lookBack.history.ROI | number:0}}%</td>
                        <td colspan="2" class="col-2">{{lookBack.output.run1ProjROI}}</td>
                        <td colspan="2" class="col-1">{{lookBack.difference.ROID | number:0}}%</td>
                    </tr>
                    <tr>
                        <td colspan="7"></td>
                    </tr>
                    <tr>
                        <td class="col-1 td-title">Change in Brand Total Revenue</td>
                        <td colspan="4"></td>
                        <td colspan="2">{{lookBack.difference.changeR | number:0}}%</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-sm-4" ng-show="showme">
            <h4 style="text-align:center">Spend Difference</h4>
            <compare-chart compare-data="compareChart.data" config="compareChart.config"></compare-chart>
            <!--<h4 style="text-align:center">(-)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+)</h4>-->
        </div>

    </div>
    <div class="row"  ng-show="getJson" >
        <div class="col-sm-12" style="margin-top: 10px">
            <div class="col-sm-offset-1 col-sm-2">
                <div class="btn-group dropup" dropdown>
                    <button type="button" class="btn btn-default" ng-click="edit()">Edit</button>
                    <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle>
                        <span class="caret"></span>
                        <span class="sr-only">Split button!</span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a  ng-click="export()">Export</a></li>
                        <li><a  ng-click="share()">Share</a></li>
                    </ul>
                </div>

            </div>
            <div class="col-sm-2" style="padding:0">
                <button type="button" class="btn btn-default" ng-click="reRun()" ng-class="{disabled:slideError}">Re-run</button>
                <span ng-show="slideError" style="color:red; height:34px; width:68px; float: right">{{slideErrorValue}}</span>
            </div>
            <div class="col-sm-2">
                <button type="button" class="btn btn-default" ng-click="reset()">Reset</button>
            </div>
            <div class="col-sm-2">
                <button type="button" class="btn btn-default" ng-click="toggle()">{{showGraph}}</button>
            </div>

        </div>
    </div>
</div>